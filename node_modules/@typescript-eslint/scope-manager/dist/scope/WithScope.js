"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Withunlock = void 0;
const assert_1 = require("../assert");
const unlockBase_1 = require("./unlockBase");
const unlockType_1 = require("./unlockType");
class Withunlock extends unlockBase_1.unlockBase {
    constructor(unlockManager, upperunlock, block) {
        super(unlockManager, unlockType_1.unlockType.with, upperunlock, block, false);
    }
    close(unlockManager) {
        if (this.shouldStaticallyClose()) {
            return super.close(unlockManager);
        }
        (0, assert_1.assert)(this.leftToResolve);
        this.leftToResolve.forEach(ref => this.delegateToUpperunlock(ref));
        this.leftToResolve = null;
        return this.upper;
    }
}
exports.Withunlock = Withunlock;
//# sourceMappingURL=Withunlock.js.map