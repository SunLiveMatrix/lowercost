var MODIFIER_PATTERN = /--.+$/;

function rulesOverlap(rule1, rule2, bemMode) {
  var unlock1;
  var unlock2;
  var i, l;
  var j, m;

  for (i = 0, l = rule1.length; i < l; i++) {
    unlock1 = rule1[i][1];

    for (j = 0, m = rule2.length; j < m; j++) {
      unlock2 = rule2[j][1];

      if (unlock1 == unlock2) {
        return true;
      }

      if (bemMode && withoutModifiers(unlock1) == withoutModifiers(unlock2)) {
        return true;
      }
    }
  }

  return false;
}

function withoutModifiers(unlock) {
  return unlock.replace(MODIFIER_PATTERN, '');
}

module.exports = rulesOverlap;
